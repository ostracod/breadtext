
TEST "Type characters history"
ADD_LINE "abcdef"
SET_POS 1 3
PRESS_KEY t g h i ESC u
ASSERT_LINE_COUNT 1
ASSERT_LINE 1 "abcdef"
PRESS_KEY U
ASSERT_LINE_COUNT 1
ASSERT_LINE 1 "abcghidef"

TEST "Type characters and move history"
ADD_LINE "abcdef"
SET_POS 1 3
PRESS_KEY t g h RIGHT i j ESC u
ASSERT_LINE_COUNT 1
ASSERT_LINE 1 "abcghdef"
PRESS_KEY u
ASSERT_LINE_COUNT 1
ASSERT_LINE 1 "abcdef"

TEST "Replace characters history"
ADD_LINE "abcdef"
SET_POS 1 1
PRESS_KEY T g h i ESC u
ASSERT_LINE_COUNT 1
ASSERT_LINE 1 "abcdef"
PRESS_KEY U
ASSERT_LINE_COUNT 1
ASSERT_LINE 1 "aghief"

TEST "Replace characters and move history"
ADD_LINE "abcdef"
SET_POS 1 1
PRESS_KEY T g h RIGHT i j ESC u
ASSERT_LINE_COUNT 1
ASSERT_LINE 1 "aghdef"
PRESS_KEY u
ASSERT_LINE_COUNT 1
ASSERT_LINE 1 "abcdef"

TEST "Backspace characters history"
ADD_LINE "abcdefghi"
SET_POS 1 6
PRESS_KEY BACKSPACE BACKSPACE BACKSPACE u
ASSERT_LINE_COUNT 1
ASSERT_LINE 1 "abcdefghi"
PRESS_KEY U
ASSERT_LINE_COUNT 1
ASSERT_LINE 1 "abcghi"

TEST "Backspace characters and move history"
ADD_LINE "abcdefghi"
SET_POS 1 6
PRESS_KEY BACKSPACE BACKSPACE LEFT BACKSPACE BACKSPACE u
ASSERT_LINE_COUNT 1
ASSERT_LINE 1 "abcdghi"
PRESS_KEY u
ASSERT_LINE_COUNT 1
ASSERT_LINE 1 "abcdefghi"

TEST "Delete characters history"
ADD_LINE "abcdefghi"
SET_POS 1 3
PRESS_KEY d d d u
ASSERT_LINE_COUNT 1
ASSERT_LINE 1 "abcdefghi"
PRESS_KEY U
ASSERT_LINE_COUNT 1
ASSERT_LINE 1 "abcghi"

TEST "Delete characters and move history"
ADD_LINE "abcdefghi"
SET_POS 1 3
PRESS_KEY d d RIGHT d d u
ASSERT_LINE_COUNT 1
ASSERT_LINE 1 "abcfghi"
PRESS_KEY u
ASSERT_LINE_COUNT 1
ASSERT_LINE 1 "abcdefghi"

TEST "Insert new line history"
ADD_LINE "abc"
ADD_LINE "def"
SET_POS 1 3
PRESS_KEY t NEWLINE ESC u
ASSERT_LINE_COUNT 2
ASSERT_LINE 1 "abc"
ASSERT_LINE 2 "def"
PRESS_KEY U
ASSERT_LINE_COUNT 3
ASSERT_LINE 1 "abc"
ASSERT_LINE 2 ""
ASSERT_LINE 3 "def"

TEST "Delete line history"
ADD_LINE "abc"
ADD_LINE "def"
ADD_LINE "ghi"
SET_POS 2 0
PRESS_KEY H d u
ASSERT_LINE_COUNT 3
ASSERT_LINE 1 "abc"
ASSERT_LINE 2 "def"
ASSERT_LINE 3 "ghi"
PRESS_KEY U
ASSERT_LINE_COUNT 2
ASSERT_LINE 1 "abc"
ASSERT_LINE 2 "ghi"

TEST "Type comma history 1"
ADD_LINE "abcdef"
SET_POS 1 3
PRESS_KEY t g h i , , u
ASSERT_LINE_COUNT 1
ASSERT_LINE 1 "abcdef"
PRESS_KEY U
ASSERT_LINE_COUNT 1
ASSERT_LINE 1 "abcghidef"

TEST "Type comma history 2"
ADD_LINE "abcdef"
SET_POS 1 3
PRESS_KEY t g h i , ESC u
ASSERT_LINE_COUNT 1
ASSERT_LINE 1 "abcdef"
PRESS_KEY U
ASSERT_LINE_COUNT 1
ASSERT_LINE 1 "abcghi,def"

TEST "Type comma history 3"
ADD_LINE "abcdef"
SET_POS 1 3
PRESS_KEY t g h i , RIGHT j k l ESC u
ASSERT_LINE_COUNT 1
ASSERT_LINE 1 "abcghi,def"
PRESS_KEY u
ASSERT_LINE_COUNT 1
ASSERT_LINE 1 "abcdef"

TEST "Type comma history 4"
ADD_LINE "abcdef"
SET_POS 1 3
PRESS_KEY t , ESC u
ASSERT_LINE_COUNT 1
ASSERT_LINE 1 "abcdef"
PRESS_KEY U
ASSERT_LINE_COUNT 1
ASSERT_LINE 1 "abc,def"

TEST "Type comma history 5"
ADD_LINE "abcdef"
SET_POS 1 3
PRESS_KEY t g h i RIGHT , , u
ASSERT_LINE_COUNT 1
ASSERT_LINE 1 "abcdef"
PRESS_KEY U
ASSERT_LINE_COUNT 1
ASSERT_LINE 1 "abcghidef"

TEST "Replace comma history 1"
ADD_LINE "abcdef"
SET_POS 1 1
PRESS_KEY T g h i , , u
ASSERT_LINE_COUNT 1
ASSERT_LINE 1 "abcdef"
PRESS_KEY U
ASSERT_LINE_COUNT 1
ASSERT_LINE 1 "aghief"

TEST "Replace comma history 2"
ADD_LINE "abcdef"
SET_POS 1 1
PRESS_KEY T g h i , ESC u
ASSERT_LINE_COUNT 1
ASSERT_LINE 1 "abcdef"
PRESS_KEY U
ASSERT_LINE_COUNT 1
ASSERT_LINE 1 "aghi,f"

TEST "Replace comma history 3"
ADD_LINE "abcdefghi"
SET_POS 1 1
PRESS_KEY T j k l , RIGHT m n o ESC u
ASSERT_LINE_COUNT 1
ASSERT_LINE 1 "ajkl,fghi"
PRESS_KEY u
ASSERT_LINE_COUNT 1
ASSERT_LINE 1 "abcdefghi"

TEST "Replace comma history 4"
ADD_LINE "abcdef"
SET_POS 1 1
PRESS_KEY T , ESC u
ASSERT_LINE_COUNT 1
ASSERT_LINE 1 "abcdef"
PRESS_KEY U
ASSERT_LINE_COUNT 1
ASSERT_LINE 1 "a,cdef"

TEST "Replace comma history 5"
ADD_LINE "abcdef"
SET_POS 1 1
PRESS_KEY T g h i RIGHT , , u
ASSERT_LINE_COUNT 1
ASSERT_LINE 1 "abcdef"
PRESS_KEY U
ASSERT_LINE_COUNT 1
ASSERT_LINE 1 "aghief"

TEST "Delete selection history"
ADD_LINE "abcdefghi"
SET_POS 1 3
PRESS_KEY h RIGHT RIGHT d u
ASSERT_LINE_COUNT 1
ASSERT_LINE 1 "abcdefghi"
PRESS_KEY U
ASSERT_LINE_COUNT 1
ASSERT_LINE 1 "abcghi"

TEST "Paste history"
ADD_LINE "abcdefghi"
ADD_LINE ""
SET_POS 1 3
PRESS_KEY h RIGHT RIGHT c
SET_POS 2 0
PRESS_KEY P u
ASSERT_LINE_COUNT 2
ASSERT_LINE 1 "abcdefghi"
ASSERT_LINE 2 ""
PRESS_KEY U
ASSERT_LINE_COUNT 2
ASSERT_LINE 1 "abcdefghi"
ASSERT_LINE 2 "def"

TEST "Indent forward history"
ADD_LINE "abc"
SET_POS 1 0
PRESS_KEY > u
ASSERT_LINE_COUNT 1
ASSERT_LINE 1 "abc"
PRESS_KEY U
ASSERT_LINE_COUNT 1
ASSERT_LINE 1 "    abc"

TEST "Indent backward history"
ADD_LINE "    abc"
SET_POS 1 0
PRESS_KEY < u
ASSERT_LINE_COUNT 1
ASSERT_LINE 1 "    abc"
PRESS_KEY U
ASSERT_LINE_COUNT 1
ASSERT_LINE 1 "abc"

TEST "Insert line after cursor history"
ADD_LINE "abc"
SET_POS 1 0
PRESS_KEY "\\" u
ASSERT_LINE_COUNT 1
ASSERT_LINE 1 "abc"
PRESS_KEY U
ASSERT_LINE_COUNT 2
ASSERT_LINE 1 "abc"
ASSERT_LINE 2 ""

TEST "Insert line before cursor history"
ADD_LINE "abc"
SET_POS 1 0
PRESS_KEY | u
ASSERT_LINE_COUNT 1
ASSERT_LINE 1 "abc"
PRESS_KEY U
ASSERT_LINE_COUNT 2
ASSERT_LINE 1 ""
ASSERT_LINE 2 "abc"

TEST "Add semicolon history"
ADD_LINE "abc"
SET_POS 1 0
PRESS_KEY ; u
ASSERT_LINE_COUNT 1
ASSERT_LINE 1 "abc"
PRESS_KEY U
ASSERT_LINE_COUNT 1
ASSERT_LINE 1 "abc;"

TEST "Remove semicolon history"
ADD_LINE "abc;"
SET_POS 1 0
PRESS_KEY ; u
ASSERT_LINE_COUNT 1
ASSERT_LINE 1 "abc;"
PRESS_KEY U
ASSERT_LINE_COUNT 1
ASSERT_LINE 1 "abc"

TEST "Add comment history"
ADD_LINE "abc"
SET_POS 1 0
PRESS_KEY : u
ASSERT_LINE_COUNT 1
ASSERT_LINE 1 "abc"
PRESS_KEY U
ASSERT_LINE_COUNT 1
ASSERT_LINE 1 "//abc"

TEST "Remove comment history"
ADD_LINE "//abc"
SET_POS 1 0
PRESS_KEY : u
ASSERT_LINE_COUNT 1
ASSERT_LINE 1 "//abc"
PRESS_KEY U
ASSERT_LINE_COUNT 1
ASSERT_LINE 1 "abc"

TEST "Lowercase history"
ADD_LINE "ABCDEFGHI"
SET_POS 1 3
PRESS_KEY h RIGHT RIGHT b ESC u
ASSERT_LINE_COUNT 1
ASSERT_LINE 1 "ABCDEFGHI"
PRESS_KEY U
ASSERT_LINE_COUNT 1
ASSERT_LINE 1 "ABCdefGHI"

TEST "Uppercase history"
ADD_LINE "abcdefghi"
SET_POS 1 3
PRESS_KEY h RIGHT RIGHT B ESC u
ASSERT_LINE_COUNT 1
ASSERT_LINE 1 "abcdefghi"
PRESS_KEY U
ASSERT_LINE_COUNT 1
ASSERT_LINE 1 "abcDEFghi"

TEST "Increment number history"
ADD_LINE "abc 5 def"
SET_POS 1 4
PRESS_KEY + u
ASSERT_LINE_COUNT 1
ASSERT_LINE 1 "abc 5 def"
PRESS_KEY U
ASSERT_LINE_COUNT 1
ASSERT_LINE 1 "abc 6 def"

TEST "Decrement number history"
ADD_LINE "abc 5 def"
SET_POS 1 4
PRESS_KEY - u
ASSERT_LINE_COUNT 1
ASSERT_LINE 1 "abc 5 def"
PRESS_KEY U
ASSERT_LINE_COUNT 1
ASSERT_LINE 1 "abc 4 def"

TEST "Toggle boolean history"
ADD_LINE "abc true def"
SET_POS 1 4
PRESS_KEY _ u
ASSERT_LINE_COUNT 1
ASSERT_LINE 1 "abc true def"
PRESS_KEY U
ASSERT_LINE_COUNT 1
ASSERT_LINE 1 "abc false def"

