
START_TEST "pressKey"
pressKey('t')
pressKey('a')
pressKey('b')
pressKey('c')
pressKey(KEY_ESCAPE)
testLog(getLineContents(0))
RUN_SCRIPT
ASSERT_NO_ERROR
ASSERT_OUTPUT
abc
END_TEST

START_TEST "Bad pressKey"
pressKey([])
RUN_SCRIPT
ASSERT_ERROR
ASSERT_OUTPUT
END_TEST

START_TEST "getMode"
pressKey('t')
testLog(getMode() == MODE_TEXT_ENTRY)
pressKey(KEY_ESCAPE)
testLog(getMode() == MODE_COMMAND)
RUN_SCRIPT
ASSERT_NO_ERROR
ASSERT_OUTPUT
1
1
END_TEST

START_TEST "setMode"
setMode(MODE_TEXT_ENTRY)
testLog(getMode() == MODE_TEXT_ENTRY)
pressKey('a')
pressKey('b')
pressKey('c')
setMode(MODE_COMMAND)
testLog(getMode() == MODE_COMMAND)
testLog(getLineContents(0))
RUN_SCRIPT
ASSERT_NO_ERROR
ASSERT_OUTPUT
1
1
abc
END_TEST

START_TEST "Bad setMode"
setMode([])
RUN_SCRIPT
ASSERT_ERROR
ASSERT_OUTPUT
END_TEST

START_TEST "getSelectionContents"
pressKey('t')
pressKey('a')
pressKey('b')
pressKey('c')
pressKey('d')
pressKey(KEY_ESCAPE)
pressKey(KEY_LEFT)
pressKey(KEY_LEFT)
pressKey('h')
pressKey(KEY_LEFT)
testLog(getSelectionContents())
RUN_SCRIPT
ASSERT_NO_ERROR
ASSERT_OUTPUT
bc
END_TEST

START_TEST "getLineCount"
pressKey('t')
pressKey('a')
pressKey('b')
pressKey(KEY_NEWLINE)
pressKey('c')
pressKey('d')
pressKey(KEY_ESCAPE)
testLog(getLineCount())
RUN_SCRIPT
ASSERT_NO_ERROR
ASSERT_OUTPUT
2
END_TEST

START_TEST "getLineContents"
pressKey('t')
pressKey('a')
pressKey('b')
pressKey(KEY_NEWLINE)
pressKey('c')
pressKey('d')
pressKey(KEY_ESCAPE)
testLog(getLineContents(0))
testLog(getLineContents(1))
RUN_SCRIPT
ASSERT_NO_ERROR
ASSERT_OUTPUT
ab
cd
END_TEST

START_TEST "Bad getLineContents 1"
getLineContents([])
RUN_SCRIPT
ASSERT_ERROR
ASSERT_OUTPUT
END_TEST

START_TEST "Bad getLineContents 2"
pressKey('t')
pressKey('a')
pressKey('b')
pressKey(KEY_NEWLINE)
pressKey('c')
pressKey('d')
pressKey(KEY_ESCAPE)
getLineContents(-1)
RUN_SCRIPT
ASSERT_ERROR
ASSERT_OUTPUT
END_TEST

START_TEST "Bad getLineContents 2"
pressKey('t')
pressKey('a')
pressKey('b')
pressKey(KEY_NEWLINE)
pressKey('c')
pressKey('d')
pressKey(KEY_ESCAPE)
getLineContents(2)
RUN_SCRIPT
ASSERT_ERROR
ASSERT_OUTPUT
END_TEST

START_TEST "getCursorCharIndex()"
pressKey('t')
testLog(getCursorCharIndex())
pressKey('a')
testLog(getCursorCharIndex())
pressKey('b')
testLog(getCursorCharIndex())
pressKey(KEY_NEWLINE)
testLog(getCursorCharIndex())
pressKey('c')
testLog(getCursorCharIndex())
pressKey('d')
testLog(getCursorCharIndex())
pressKey(KEY_ESCAPE)
RUN_SCRIPT
ASSERT_NO_ERROR
ASSERT_OUTPUT
0
1
2
0
1
2
END_TEST

START_TEST "getCursorLineIndex()"
pressKey('t')
testLog(getCursorLineIndex())
pressKey('a')
testLog(getCursorLineIndex())
pressKey('b')
testLog(getCursorLineIndex())
pressKey(KEY_NEWLINE)
testLog(getCursorLineIndex())
pressKey('c')
testLog(getCursorLineIndex())
pressKey('d')
testLog(getCursorLineIndex())
pressKey(KEY_ESCAPE)
RUN_SCRIPT
ASSERT_NO_ERROR
ASSERT_OUTPUT
0
0
0
1
1
1
END_TEST

START_TEST "setCursorPos"
pressKey('t')
pressKey('a')
pressKey('b')
pressKey(KEY_NEWLINE)
pressKey('c')
pressKey('d')
setCursorPos(1, 0)
pressKey('X')
setCursorPos(2, 1)
pressKey('Y')
pressKey(KEY_ESCAPE)
testLog(getLineContents(0))
testLog(getLineContents(1))
RUN_SCRIPT
ASSERT_NO_ERROR
ASSERT_OUTPUT
aXb
cdY
END_TEST

START_TEST "Bad setCursorPos 1"
pressKey('t')
pressKey('a')
pressKey('b')
pressKey(KEY_NEWLINE)
pressKey('c')
pressKey('d')
pressKey(KEY_ESCAPE)
setCursorPos(-1, 0)
RUN_SCRIPT
ASSERT_ERROR
ASSERT_OUTPUT
END_TEST

START_TEST "Bad setCursorPos 2"
pressKey('t')
pressKey('a')
pressKey('b')
pressKey(KEY_NEWLINE)
pressKey('c')
pressKey('d')
pressKey(KEY_ESCAPE)
setCursorPos(3, 0)
RUN_SCRIPT
ASSERT_ERROR
ASSERT_OUTPUT
END_TEST

START_TEST "Bad setCursorPos 3"
pressKey('t')
pressKey('a')
pressKey('b')
pressKey(KEY_NEWLINE)
pressKey('c')
pressKey('d')
pressKey(KEY_ESCAPE)
setCursorPos(0, -1)
RUN_SCRIPT
ASSERT_ERROR
ASSERT_OUTPUT
END_TEST

START_TEST "Bad setCursorPos 4"
pressKey('t')
pressKey('a')
pressKey('b')
pressKey(KEY_NEWLINE)
pressKey('c')
pressKey('d')
pressKey(KEY_ESCAPE)
setCursorPos(0, 2)
RUN_SCRIPT
ASSERT_ERROR
ASSERT_OUTPUT
END_TEST
